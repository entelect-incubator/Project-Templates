/**
 * Auto-generated API Client from OpenAPI specification
 *
 * GENERATED FILE - DO NOT EDIT
 * This file is automatically generated by the generate-react-client script.
 * Any manual changes will be overwritten on the next generation.
 *
 * To regenerate this file:
 * - Windows: cd clients/generation && .\generate-react-client.bat
 * - Unix: cd clients/generation && ./generate-react-client.sh
 *
 * @generated
 */

// This is a placeholder file. It will be replaced when running the generation script.
// The actual client will be generated based on the OpenAPI specification.

export interface TodoDto {
	id: string;
	title: string;
	description?: string | null;
	completed: boolean;
	createdAt: Date;
	updatedAt?: Date | null;
}

export interface CreateTodoCommand {
	title: string;
	description?: string | null;
}

export interface UpdateTodoCommand {
	completed: boolean;
	title?: string;
	description?: string | null;
}

export interface PaginatedTodosDto {
	items: TodoDto[];
	total: number;
	page: number;
	pageSize: number;
}

/**
 * Auto-generated Todo API Client
 * Provides type-safe access to all API endpoints
 */
export class TodoApiClient {
	private baseUrl: string;
	private readonly headers: HeadersInit;

	constructor(baseUrl?: string) {
		this.baseUrl = baseUrl || "http://localhost:5000";
		this.headers = {
			"Content-Type": "application/json",
		};
	}

	/**
	 * Get all todos with pagination
	 */
	async getTodos(page: number = 1, pageSize: number = 10): Promise<PaginatedTodosDto> {
		const response = await fetch(`${this.baseUrl}/api/todos?page=${page}&pageSize=${pageSize}`, { headers: this.headers });
		return this.handleResponse<PaginatedTodosDto>(response);
	}

	/**
	 * Get a single todo by ID
	 */
	async getTodoById(id: string): Promise<TodoDto> {
		const response = await fetch(`${this.baseUrl}/api/todos/${id}`, { headers: this.headers });
		return this.handleResponse<TodoDto>(response);
	}

	/**
	 * Create a new todo
	 */
	async createTodo(command: CreateTodoCommand): Promise<TodoDto> {
		const response = await fetch(`${this.baseUrl}/api/todos`, {
			method: "POST",
			headers: this.headers,
			body: JSON.stringify(command),
		});
		return this.handleResponse<TodoDto>(response);
	}

	/**
	 * Update an existing todo
	 */
	async updateTodo(id: string, command: UpdateTodoCommand): Promise<TodoDto> {
		const response = await fetch(`${this.baseUrl}/api/todos/${id}`, {
			method: "PUT",
			headers: this.headers,
			body: JSON.stringify(command),
		});
		return this.handleResponse<TodoDto>(response);
	}

	/**
	 * Delete a todo
	 */
	async deleteTodo(id: string): Promise<void> {
		const response = await fetch(`${this.baseUrl}/api/todos/${id}`, { method: "DELETE" });
		if (!response.ok) {
			throw new Error(`Failed to delete todo: ${response.statusText}`);
		}
	}

	/**
	 * Search todos
	 */
	async searchTodos(query: string, page: number = 1, pageSize: number = 10): Promise<PaginatedTodosDto> {
		const response = await fetch(`${this.baseUrl}/api/todos/search?query=${encodeURIComponent(query)}&page=${page}&pageSize=${pageSize}`, { headers: this.headers });
		return this.handleResponse<PaginatedTodosDto>(response);
	}

	private async handleResponse<T>(response: Response): Promise<T> {
		if (!response.ok) {
			const error = await response.json().catch(() => ({ message: response.statusText }));
			throw new Error(error.message || response.statusText);
		}
		return response.json();
	}
}

export default TodoApiClient;
